<div class="container-fluid full p-2">
    <div class="container mt-3 mb-3" *ngIf="varOk">
        <ngb-accordion [closeOthers]="true" activeIds="static-1" class="bg-dark">
            <ngb-panel id="static-1">
                <ng-template ngbPanelTitle>
                  <span><b>Gestion des formations</b></span>
                </ng-template>
                <ng-template ngbPanelContent class="bg-dark">
                    <form class="row g-3  bg-dark p-3 text-white" #form="ngForm" (ngSubmit)="addFormation()" *ngIf="formation  as f">
                        <input type="hidden" class="form-control" id="idForm" name="idForm" [(ngModel)]="f.idFormation" #code="ngModel" >
                        <div class="col-md-4">
                            <label for="codeForm" class="form-label">Code Formation</label>
                            <input type="text" class="form-control" id="codeForm" name="codeForm"required minlength="5" [(ngModel)]="f.codeFormation" #code="ngModel" (change)="changeId($event)">
                            <div *ngIf="code.invalid && code.dirty" class="invalid-feedback">
                                Le code de la formation doit avoir au moins 5 caractères
                            </div>
                        </div>
                        <div class="col-md-8">
                            <label for="nomForm" class="form-label">Nom</label>
                            <input type="text" class="form-control" id="nomForm" name="nomForm"required [(ngModel)]="f.nom" #nom="ngModel">
                            <div *ngIf="nom.invalid && nom.dirty" class="invalid-feedback">
                                Le nom de la formation est indispensable!!!
                            </div>
                        </div>
                        <div class="col-md-10">
                            <label for="inputStheme" class="form-label">Sous thème</label>
                            <select class="dropdownlist" id="inputStheme" class="form-select"  (change)="selectChange($event)" name="stheme" >
                                <option [ngValue]="null" disabled>Choisir Sous thème ...</option>
                                <option *ngFor="let s of sthemes$|async" [ngValue]="s" [selected]="f.stheme.codeStheme===s.codeStheme">{{s.codeStheme}}-{{s.nom}}</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="inputJours" class="form-label">Nombre de Jours</label>
                            <input class="form-control" type="number"  id="inputJours" min="1" max="99" required [(ngModel)]="f.nbreJrs" name="nbreJours" #nbreJours="ngModel">
                            <div *ngIf="nbreJours.invalid && nbreJours.dirty" class="invalid-feedback">
                                Le nombre de jours doit etre supérieur à 0
                            </div>
                        </div>
                        <div class="col-12">
                            <label for="inputDescription" class="form-label">Description</label>
                            <textarea class="form-control" name="" id="inputDescription" [(ngModel)]="f.description" name="description"cols="30" rows="5" placeholder="Entrez une description ou présentation de ladite formation" [value]="''"></textarea>
                        </div>
                        <div class="col-md-6">
                            <label for="inputObjectifs" class="form-label">Objectifs</label>
                            <textarea class="form-control" name="" id="inputObjectifs" cols="30" rows="6" placeholder="Entrez une liste d'objectifs de ladite formation séparée par des points virgule" [value]="''"></textarea>
                        </div>
                        <div class="col-md-6">
                            <label for="inputProgramme" class="form-label">Programme</label>
                            <textarea class="form-control" name="" id="inputProgramme" cols="30" rows="6" placeholder="Entrez le programme de la formation dont les items sont séparés par des points virgule" [value]="''"></textarea>
                        </div>
                        <div class="col-12">
                            <button [disabled]="form.invalid" type="submit" class="btn btn-primary mt-3 ps-4 pe-4" [ngClass]="isCreation? 'btn-primary':'btn-warning'" >{{ isCreation? "Créer":"Modifier"}}</button>
                        </div>
    
                    </form>
                </ng-template>
              </ngb-panel>
        </ngb-accordion>
    </div>

    <div class="container-fluid mb-5">
        <ngb-accordion [closeOthers]="true" activeIds="static-1">
            <ngb-panel id="static-1">
                <ng-template ngbPanelTitle>
                  <span><b>Liste des formations</b></span>
                </ng-template>
                <ng-template ngbPanelContent>
                    <div class="row g-1  bg-dark p-3 text-white">

                    </div>
                </ng-template>
              </ngb-panel>
        </ngb-accordion>
    </div>
</div>
